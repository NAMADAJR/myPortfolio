import { useEffect, useRef } from "react";
import { gsap } from "gsap";

const Preloader = ({ onComplete }) => {
  const preloaderRef = useRef(null);

  useEffect(() => {
    const tl = gsap.timeline({
      onComplete,
    });

    tl.fromTo(
      "#welcome-path",
      { strokeDasharray: 500, strokeDashoffset: 500 },
      { strokeDashoffset: 0, duration: 5, ease: "power2.out" }
    ).to(preloaderRef.current, {
      opacity: 0,
      duration: 0.5,
      pointerEvents: "none",
      onComplete: () => onComplete?.(),
    });

    return () => {
      tl.kill(); 
    };
  }, [onComplete]);

  return (
    <div
      ref={preloaderRef}
      className="bg-black fixed inset-0 flex items-center justify-center z-50 preloader transition-opacity duration-500"
    >
      <svg 
      className="w-full md:w-5/6 lg:w-3/4 h-auto"
      viewBox="0 0 1500 1000" aria-hidden="true">
      <g transform="translate(600,320)">
        <path
          id="welcome-path"
          fill="none"
          stroke="#A25D34"
          strokeWidth="2"
          d="m 58.682514,172.81439 -0.512811,-0.096 q -0.708126,-5.8993 -1.416253,-10.99703 -0.683715,-5.09777 -1.391842,-9.61842 -0.683715,-4.52069 -1.367431,-8.59246 -0.659305,-4.07181 -1.2942,-7.88713 -0.903474,-5.32217 -1.6116,-9.81076 -0.708126,-4.5207 -1.489515,-8.6566 h -0.170968 q -0.976737,4.64889 -1.977883,8.97719 -1.00118,4.29625 -2.051148,8.52835 -1.049999,4.20002 -2.197673,8.49627 -1.147673,4.26415 -2.417431,8.84894 -1.269758,4.5848 -2.710422,9.61842 -1.416282,5.03364 -3.027883,10.74058 l -4.199967,0.44884 -0.512811,-0.096 q -3.858094,-25.61703 -6.641809,-41.55157 -2.759273,-15.96656 -4.395316,-22.31475 -0.439515,-1.73129 -0.927883,-2.91755 -0.488369,-1.21835 -1.147674,-1.98782 -0.659305,-0.76948 -1.562779,-1.12216 -0.879063,-0.35252 -2.12441,-0.35252 -0.8058,0 -1.758126,0.16046 -0.976737,0.12804 -2.1488208,0.38453 l -0.2684854,-2.85346 q 3.7848312,-1.218351 6.2755252,-1.859579 2.515105,-0.67328 4.151116,-0.67328 1.294199,0 2.12441,0.480931 0.854652,0.44884 1.440694,1.474804 0.586043,1.025964 1.025558,2.661104 0.439548,1.63515 0.927915,3.97562 0.708126,3.33439 1.684863,8.46421 1.001148,5.09777 2.197673,12.05509 1.196495,6.95731 2.588337,15.77421 1.391843,8.81689 2.9058,19.58952 h 0.170968 q 1.220906,-4.36035 2.515073,-9.23367 1.318611,-4.87334 2.661632,-10.03526 1.342989,-5.16187 2.68601,-10.51614 1.34302,-5.35423 2.637189,-10.67643 1.294167,-5.35427 2.490694,-10.58025 1.220905,-5.22602 2.295315,-10.1314 0.12221,-0.57713 0.586042,-0.83362 0.463958,-0.256491 1.001147,-0.256491 0.537222,0 0.976737,0.192471 0.634895,3.20614 1.440695,7.6306 0.8058,4.39239 1.684863,9.55432 0.879063,5.12982 1.806978,10.83673 0.952327,5.67486 1.8558,11.51005 0.927884,5.83516 1.782536,11.60622 0.854653,5.77104 1.58719,11.02911 h 0.12221 q 1.758125,-4.80919 3.49181,-9.97106 1.758126,-5.19397 3.345346,-10.35584 1.6116,-5.16188 2.979031,-10.16346 1.391843,-5.00158 2.393021,-9.45813 1.025558,-4.45655 1.587189,-8.20772 0.586043,-3.75118 0.586043,-6.44433 0,-1.57104 -0.219727,-3.17409 -0.195348,-1.60314 -0.610484,-3.01384 -0.415105,-1.4107 -1.074411,-2.564914 -0.634863,-1.15421 -1.513926,-1.827489 l 0.09752,-0.609178 q 0.488367,-0.09602 0.976736,-0.16046 0.488368,-0.06402 0.976737,-0.06402 1.367431,0 2.612778,0.448839 1.245317,0.44888 2.197643,1.410702 0.952325,0.961862 1.513956,2.50081 0.5616,1.53894 0.5616,3.68703 0,1.63514 -0.439515,4.3283 -0.439548,2.66111 -1.269758,6.15579 -0.8058,3.49469 -1.953474,7.69474 -1.147673,4.168 -2.563925,8.84895 -1.391874,4.68098 -3.027884,9.77871 -1.611631,5.06572 -3.394167,10.32379 -1.758126,5.22602 -3.638337,10.5482 -1.855799,5.29012 -3.760452,10.45204 z m 47.567076,-11.15738 q 0.14659,0.096 0.36625,0.28851 0.24411,0.16046 0.43955,0.38453 0.19535,0.19247 0.34184,0.44888 0.14659,0.22448 0.14659,0.44884 0,0.12803 -0.0731,0.25649 -1.36743,2.50082 -2.95462,4.36035 -1.56278,1.82753 -3.27208,3.07789 -1.684865,1.21836 -3.442992,1.79544 -1.758126,0.60919 -3.467399,0.60919 -2.930211,0 -5.372052,-1.57101 -2.441842,-1.57099 -4.199968,-4.29625 -1.758126,-2.72521 -2.759304,-6.38018 -0.976737,-3.68708 -0.976737,-7.88713 0,-3.43058 0.561631,-6.86112 0.586043,-3.43058 1.660453,-6.54053 1.098821,-3.10999 2.6616,-5.77105 1.562778,-2.69316 3.540693,-4.64893 2.002295,-1.9878 4.370873,-3.10995 2.393021,-1.12216 5.127884,-1.12216 1.806948,0 3.442988,0.64123 1.63604,0.64123 2.85695,1.85958 1.24535,1.18626 1.97791,2.94965 0.73254,1.76339 0.73254,4.00767 0,3.27028 -1.63604,5.70695 -1.6116,2.43666 -4.46855,4.1359 -2.856977,1.69925 -6.739481,2.75727 -3.858127,1.02597 -8.351115,1.53894 v 0.54508 q 0,4.10385 0.781389,7.50235 0.8058,3.39853 2.197673,5.83519 1.391843,2.40458 3.272052,3.75118 1.880211,1.34656 4.053474,1.34656 2.197642,0 4.492988,-1.4107 2.31973,-1.44276 4.68834,-4.64889 z m -4.59066,-25.74531 q 0,-1.47481 -0.3907,-2.75726 -0.36628,-1.28246 -1.05,-2.21223 -0.659302,-0.96187 -1.587186,-1.50689 -0.927915,-0.54504 -2.002326,-0.54504 -1.587189,0 -2.881358,0.73738 -1.294199,0.73742 -2.319756,2.01989 -1.02559,1.2504 -1.80698,2.94964 -0.781389,1.66719 -1.342989,3.55882 -0.537221,1.89164 -0.879063,3.87943 -0.341873,1.98783 -0.488369,3.87942 3.467401,-0.32051 6.202263,-1.09007 2.759274,-0.80152 4.639515,-2.01988 1.904621,-1.2504 2.905769,-2.94966 1.00118,-1.73129 1.00118,-3.94355 z m 22.58702,-50.368439 q -0.48836,5.450419 -0.97673,11.189421 -0.46395,5.706908 -0.90347,11.574158 -0.41514,5.8352 -0.78139,11.73449 -0.36628,5.89931 -0.63489,11.63827 -0.2685,5.70694 -0.41512,11.22151 -0.14658,5.51456 -0.14658,10.58024 0,3.17409 0.0488,5.45046 0.0731,2.27636 0.19535,3.84737 0.14658,1.57099 0.36629,2.53286 0.24409,0.96182 0.58603,1.47481 0.34184,0.51297 0.8058,0.70536 0.46397,0.16047 1.09882,0.16047 1.17208,0 2.51511,-0.44889 1.36743,-0.48089 2.75927,-1.3145 l 0.46396,1.66719 q -0.87906,0.92977 -2.22209,1.89164 -1.31858,0.96182 -2.78367,1.76337 -1.46511,0.80154 -2.8814,1.28247 -1.39184,0.51297 -2.41743,0.51297 -1.31858,0 -2.09997,-0.89772 -0.75697,-0.86565 -1.17208,-2.85349 -0.3907,-1.98778 -0.51278,-5.16187 -0.0975,-3.20615 -0.0975,-7.79093 0,-1.6672 0.0731,-4.74509 0.0731,-3.10995 0.19534,-7.2138 0.14659,-4.10387 0.31747,-8.9772 0.17097,-4.87334 0.36626,-10.06727 0.19534,-5.22602 0.41513,-10.51613 0.21973,-5.32222 0.43951,-10.25965 0.21974,-4.96953 0.41511,-9.361933 0.19534,-4.392443 0.36629,-7.75888 0.025,-0.769474 0.34187,-1.314508 0.31743,-0.577126 0.8058,-0.89772 0.51278,-0.35252 1.12323,-0.512982 0.63489,-0.16046 1.26975,-0.16046 1.46511,0 3.07674,1.025964 z M 151.96086,138.669 q 0.68373,-1.76339 0.68373,-3.59087 0,-1.25042 -0.34188,-2.34048 -0.31743,-1.12217 -0.97674,-1.95577 -0.6593,-0.86564 -1.66045,-1.34656 -0.97674,-0.51299 -2.29532,-0.51299 -1.90465,0 -3.41858,0.89772 -1.51396,0.86567 -2.68603,2.40462 -1.14767,1.53895 -1.97789,3.55878 -0.8058,2.01988 -1.34302,4.3283 -0.51278,2.30843 -0.75698,4.74509 -0.24411,2.40461 -0.24411,4.71304 0,4.13591 0.80581,7.53444 0.83023,3.36643 2.22208,5.77106 1.39184,2.37251 3.24764,3.68702 1.8558,1.31455 3.9558,1.31455 2.22205,0 4.49299,-1.50689 2.29532,-1.53895 4.44413,-4.93748 0.1466,0.096 0.36629,0.28849 0.24411,0.16046 0.43952,0.38453 0.19534,0.22449 0.34186,0.44885 0.1466,0.22448 0.1466,0.41679 0,0.12803 -0.025,0.16046 l -0.0488,0.12804 q -2.36861,5.03363 -5.68952,7.5344 -3.3209,2.50081 -7.27667,2.50081 -2.14881,0 -3.9558,-0.80153 -1.80695,-0.76947 -3.27204,-2.14812 -1.46511,-1.41071 -2.58837,-3.30233 -1.09883,-1.92369 -1.8558,-4.13592 -0.73254,-2.24432 -1.12324,-4.68098 -0.36628,-2.46872 -0.36628,-4.96949 0,-3.36648 0.56163,-6.73292 0.56164,-3.39848 1.63604,-6.50847 1.09882,-3.142 2.63719,-5.83516 1.56278,-2.7252 3.51625,-4.71304 1.97788,-2.01987 4.34646,-3.14199 2.36859,-1.15421 5.05462,-1.15421 2.00229,0 3.73601,0.64122 1.73372,0.64123 2.97906,1.82749 1.26977,1.15422 1.97789,2.82141 0.73253,1.63514 0.73253,3.65497 0,1.31455 -0.31742,2.34052 -0.29287,0.99388 -0.85466,1.7313 -0.53718,0.70537 -1.29417,1.0901 -0.73254,0.35252 -1.6116,0.35252 -0.53722,0 -1.12326,-0.12803 -0.56163,-0.16046 -1.12323,-0.48089 z m 10.0604,14.49176 q 0,-3.2382 0.51278,-6.57258 0.51277,-3.33439 1.51392,-6.44438 1.00118,-3.142 2.46629,-5.86721 1.48951,-2.75729 3.41858,-4.80922 1.92902,-2.05194 4.29763,-3.2382 2.36859,-1.18625 5.15226,-1.18625 3.12557,0 5.51859,1.73129 2.41742,1.73134 4.05344,4.58479 1.63604,2.82141 2.46628,6.44433 0.85463,3.62293 0.85463,7.40619 0,3.2382 -0.51279,6.57258 -0.51278,3.3344 -1.53837,6.47643 -1.00114,3.10994 -2.49065,5.86721 -1.46511,2.72524 -3.39418,4.77718 -1.92906,2.05193 -4.29764,3.23818 -2.36858,1.18626 -5.15229,1.18626 -3.12556,0 -5.54296,-1.73129 -2.39302,-1.73134 -4.02907,-4.55274 -1.6116,-2.85346 -2.46625,-6.47638 -0.8302,-3.62297 -0.8302,-7.40619 z m 5.83597,-3.04585 q 0,2.18018 0.24411,4.4245 0.26848,2.24428 0.80579,4.32826 0.53723,2.08402 1.31862,3.91151 0.80581,1.79544 1.88021,3.142 1.09882,1.34659 2.44184,2.11607 1.36743,0.76947 3.00347,0.76947 1.78255,0 3.12556,-0.99392 1.36744,-1.02595 2.34417,-2.69316 1.00115,-1.66719 1.63601,-3.81531 0.6593,-2.14808 1.05,-4.42446 0.39069,-2.30841 0.53722,-4.55273 0.17096,-2.24428 0.17096,-4.13592 0,-2.21221 -0.26848,-4.42444 -0.2441,-2.24432 -0.78138,-4.29625 -0.53722,-2.08399 -1.34302,-3.87943 -0.78139,-1.82748 -1.88021,-3.14203 -1.07442,-1.34656 -2.44185,-2.11603 -1.34302,-0.76948 -2.97906,-0.76948 -1.78254,0 -3.14997,0.99391 -1.34301,0.99388 -2.34417,2.66107 -0.97673,1.66719 -1.63604,3.81532 -0.63486,2.14812 -1.02555,4.42449 -0.3907,2.27633 -0.56164,4.55271 -0.14659,2.24431 -0.14659,4.10385 z m 26.78703,-21.12847 q 1.73369,-0.80154 3.3209,-1.44276 1.6116,-0.67327 2.95462,-1.15421 1.34303,-0.48093 2.36858,-0.73743 1.0256,-0.25648 1.61163,-0.25648 1.41626,0 2.19764,1.12215 0.80581,1.09012 0.80581,3.78328 0,0.64122 -0.0975,2.75725 -0.0975,2.08399 -0.29286,5.25807 -0.17097,3.17409 -0.43951,7.2459 -0.26849,4.07177 -0.61045,8.65657 l 0.14659,0.0328 q 1.7093,-8.14357 3.63833,-13.65813 1.92906,-5.54662 3.93139,-8.94515 2.00229,-3.39849 4.02903,-4.84127 2.02674,-1.47481 3.93136,-1.47481 1.68486,0 2.85695,1.09006 1.17208,1.09011 1.90465,2.8535 0.73253,1.76335 1.07441,4.00766 0.34184,2.21223 0.34184,4.52065 0,2.01988 -0.0975,4.29625 -0.0975,2.24428 -0.24411,4.45651 -0.14658,2.18017 -0.31742,4.168 -0.1466,1.95574 -0.26849,3.43058 l 0.14658,0.0328 q 1.70931,-8.27186 3.63838,-13.85052 1.95346,-5.61076 3.95576,-9.00924 2.02674,-3.39853 4.05347,-4.84129 2.02671,-1.47485 3.93136,-1.47485 1.2209,0 2.36859,0.67333 1.14767,0.67327 2.02673,2.18017 0.90347,1.4748 1.44069,3.81528 0.53719,2.34052 0.53719,5.6428 0,0.92982 -0.0975,2.56492 -0.0731,1.60308 -0.19534,3.59088 -0.12222,1.98782 -0.29287,4.2321 -0.14659,2.21227 -0.26849,4.36035 -0.1222,2.14812 -0.21972,4.10386 -0.0731,1.92368 -0.0731,3.33439 0,2.50081 0.1466,4.0718 0.17097,1.571 0.53718,2.50082 0.36629,0.89772 0.97674,1.25036 0.61049,0.32051 1.48955,0.32051 1.26976,0 2.63719,-0.44888 1.36743,-0.48089 2.75928,-1.3145 l 0.46395,1.66719 q -0.87907,0.92977 -2.22209,1.89162 -1.34301,0.96183 -2.83254,1.76339 -1.46509,0.80154 -2.9302,1.28246 -1.4651,0.51298 -2.58837,0.51298 -1.31858,0 -2.07556,-0.9298 -0.75698,-0.92977 -1.14767,-2.53283 -0.36625,-1.60309 -0.48837,-3.75121 -0.0975,-2.14808 -0.0975,-4.61684 0,-2.98171 0.14659,-6.25195 0.17097,-3.27029 0.36629,-6.21993 0.19534,-2.94965 0.34184,-5.32218 0.17097,-2.40461 0.17097,-3.62296 0,-3.49468 -0.95233,-5.22598 -0.92789,-1.76339 -2.53952,-1.76339 -1.24535,0 -2.66159,1.571 -1.39185,1.53895 -2.80813,4.26416 -1.39184,2.72525 -2.71046,6.44437 -1.29416,3.68703 -2.34417,8.01533 -1.04996,4.3283 -1.78253,9.07339 -0.70813,4.71303 -0.92789,9.45813 l -5.10347,0.83357 -0.39069,-0.0328 q 0.26848,-6.73291 0.48837,-11.92685 0.24411,-5.19397 0.41513,-9.07339 0.19536,-3.87942 0.29287,-6.57258 0.12221,-2.69315 0.12221,-4.45653 0,-3.59088 -0.95233,-5.41838 -0.92788,-1.82749 -2.39298,-1.82749 -1.29421,0 -2.73486,1.53896 -1.4163,1.50684 -2.80814,4.2 -1.39183,2.69316 -2.68604,6.38024 -1.26976,3.65502 -2.31973,7.91917 -1.02559,4.26417 -1.73371,8.9772 -0.68371,4.71304 -0.90347,9.45812 l -5.10348,0.83358 -0.39069,-0.0328 q 0.19534,-3.04583 0.36629,-6.63671 0.17097,-3.59088 0.31742,-7.27795 0.1466,-3.71913 0.24411,-7.34206 0.12221,-3.65497 0.19535,-6.79701 0.0975,-3.1741 0.12221,-5.67486 0.0488,-2.50081 0.0488,-3.94357 0,-1.3145 -0.14659,-2.21222 -0.14659,-0.89772 -0.46395,-1.41071 -0.29287,-0.54502 -0.75696,-0.76947 -0.46395,-0.22448 -1.09884,-0.22448 -0.87907,0 -2.09997,0.32052 -1.22094,0.3205 -2.78372,0.86562 z m 89.78652,32.67057 q 0.14658,0.096 0.36627,0.28851 0.24411,0.16046 0.43952,0.38453 0.19535,0.19247 0.34188,0.44888 0.14658,0.22448 0.14658,0.44884 0,0.12803 -0.0731,0.25649 -1.36743,2.50082 -2.95462,4.36035 -1.56277,1.82753 -3.27204,3.07789 -1.68491,1.21836 -3.44303,1.79544 -1.75812,0.60919 -3.4674,0.60919 -2.93021,0 -5.37205,-1.57101 -2.44184,-1.57099 -4.19997,-4.29625 -1.75813,-2.72521 -2.75927,-6.38018 -0.97674,-3.68708 -0.97674,-7.88713 0,-3.43058 0.5616,-6.86112 0.58605,-3.43058 1.66045,-6.54053 1.09886,-3.10999 2.66164,-5.77105 1.56277,-2.69316 3.54065,-4.64893 2.00231,-1.9878 4.37092,-3.10995 2.39298,-1.12216 5.12784,-1.12216 1.80699,0 3.44299,0.64123 1.63604,0.64123 2.85698,1.85958 1.24531,1.18626 1.97788,2.94965 0.73254,1.76339 0.73254,4.00767 0,3.27028 -1.636,5.70695 -1.61164,2.43666 -4.46858,4.1359 -2.85696,1.69925 -6.73949,2.75727 -3.85813,1.02597 -8.35111,1.53894 v 0.54508 q 0,4.10385 0.78138,7.50235 0.80583,3.39853 2.19768,5.83519 1.39184,2.40458 3.27205,3.75118 1.88024,1.34656 4.05347,1.34656 2.19765,0 4.49299,-1.4107 2.31976,-1.44276 4.68834,-4.64889 z m -4.59067,-25.74531 q 0,-1.47481 -0.3907,-2.75726 -0.36628,-1.28246 -1.04999,-2.21223 -0.6593,-0.96187 -1.58719,-1.50689 -0.92791,-0.54504 -2.00233,-0.54504 -1.58719,0 -2.88135,0.73738 -1.29417,0.73742 -2.31976,2.01989 -1.02557,1.2504 -1.80695,2.94964 -0.78139,1.66719 -1.34302,3.55882 -0.53722,1.89164 -0.87907,3.87943 -0.34186,1.98783 -0.48837,3.87942 3.4674,-0.32051 6.20227,-1.09007 2.75931,-0.80152 4.63952,-2.01988 1.90461,-1.2504 2.90579,-2.94966 1.00115,-1.73129 1.00115,-3.94355 z"
        />
        </g>
      </svg>
    </div>
  );
};

export default Preloader;
